{% extends 'base.html' %}
{% block content %}
<div class="container mt-3">
    <h1>Профиль бойца {{fighter_info[0][1]}}</h1>
    <h2>Общая статистика</h2>
        {% for fighter in fighter_info %}
        <table class="table">
            <thead>
                <tr>
                    <th>Побед</th>
                    <th>Поражений</th>
                    <th>КД</th>
                </tr>
            </thead>
            <tbody>
                    <tr>
                        <td>{{ fighter[2] }}</td>
                        <td>{{ fighter[3] }}</td>
                        <td>
                            {% if fighter[2] > 0 %}
                                {{ "%.2f"|format(fighter[2]/fighter[3]) }}
                            {% else %}
                                {{ fighter[2] }}
                            {% endif %}
                        </td>
                    </tr>
            </tbody>
        </table>
        {% endfor %}

    <h2>КД против каждого бойца</h2>
    <table class="table">
        <thead>
            <tr>
                <th>Соперник</th>
                <th>Побед</th>
                <th>Поражений</th>
                <th>КД</th>
            </tr>
        </thead>
        <tbody>
            {% for opponent, stats in records.items() %}
            <tr>
                {% if opponent != 'skip' %}
                    <td>{{ opponent }}</td>
                    <td>{{ stats.wins }}</td>
                    <td>{{ stats.loses }}</td>
                    <td>
                        {% if stats.loses > 0 %}
                            {{ "%.2f"|format(stats.wins / stats.loses) }}
                        {% else %}
                            {{ stats.wins }}
                        {% endif %}
                    </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Чистота</h2>
    <table class="table">
        <thead>
            <tr>
                <th>Соперник</th>
                <th>Успешные</th>
                <th>Пропущенные</th>
                <th>Чистота</th>
            </tr>
        </thead>
        <tbody>
            {% for opponent, stats in scores.items() %}
            <tr>
                {% if opponent != 'skip' %}
                    <td>{{ opponent }}</td>
                    <td>{{ stats.scored }}</td>
                    <td>{{ stats.conceded }}</td>
                    <td>
                        {% if stats.conceded > 0%}
                            {{ "%.2f"|format(stats.scored / stats.conceded) }}
                        {% else %}
                            {{ stats.scored }} <!-- Если поражений нет, просто выводим количество побед -->
                        {% endif %}
                    </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>

        <h2>Бои</h2>
<table class="table">
    <thead>
        <tr>
            <th>Боец 1</th>
            <th>Очки 1</th>
            <th>Очки 2</th>
            <th>Боец 2</th>
        </tr>
    </thead>
    <tbody>
        {% for fight in fights %}
            {% if fight[1] != 'skip' and fight[4] != 'skip' %}
            <tr>
                <td>{{ fight[1] }}</td>
                <td>{{ fight[2] }}</td>
                <td>{{ fight[3] }}</td>
                <td>{{ fight[4] }}</td>
            </tr>
            {% endif %}
        {% endfor %}
    </tbody>
</table>

    <a href="{{ url_for('list_profiles') }}" class="btn btn-link">К профилям</a>
</div>
{% endblock %}